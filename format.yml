name: Prettier format

on:
 workflow_dispatch:

jobs:
 install:
  name: Install
  runs-on: ubuntu-latest
  steps:
   - uses: actions/checkout@v1
   - uses: actions/setup-node@v1
   - run: npm i prettier@2.6.2 --no-package-lock --no-save --legacy-peer-deps
 check:
  name: Format Check
  runs-on: ubuntu-latest
  steps:
   - run: "cd ${{ github.workspace }} && npm run format"
 format:
  if: ${{ failure() }}
  name: Format
  runs-on: ubuntu-latest
  needs: [install, check]
  steps:
   - run: "cd ${{ github.workspace }} && npm run format"
 commit:
  name: Commit
  runs-on: ubuntu-latest
  needs: [format]
  steps:
  - uses: stefanzweifel/git-auto-commit-action@v4
   - with:
     commit_message: "[ðŸš€] Code formatting"
      branch: ${{ github.head_ref }}
      commit_user_name: IgorKowalczykBot
      commit_user_email: igor.kowalczyk.bot@onet.pl